<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage Time Circuit Countdown</title>
    <style>
        @font-face {
            font-family: 'Digital-7';
            src: url('Images/digital-7.ttf') format('truetype');
        }
        body {
            font-family: 'Digital-7', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #111;
            font-family: 'Courier New', Courier, monospace;
            background-image: url('https://www.transparenttextures.com/patterns/black-twill.png');
            overflow: hidden;
        }

        .main-container {
            display: flex;
            align-items: flex-start;
            gap: 100px;
        }

        .countdown-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .time-circuit {
            display: grid;
            grid-template-columns: repeat(9, auto);
            gap: 15px;
            align-items: center;
            background: url('https://www.transparenttextures.com/patterns/brushed-alum.png');
            padding: 20px;
            border-radius: 10px;
            border: 10px solid #555;
            box-shadow: 0 0 10px rgba(35, 34, 34, 0.7), inset 0 0 10px #212020;
            width: 950px;
            position: relative;
        }

        .time-circuit div {
            text-align: center;
        }

        .label {
            width: 110px;
            font-size: 1em;
            color: rgb(249, 248, 248);
            margin-bottom: 10px;
            background-color: #660000;
            padding: 5px 5px;
            border-radius: 3px;
        }

        .display {
            font-size: 2.5em;
            background-color: #333;
            padding: 10px;
            border-radius: 5px;
            box-shadow: inset 0 0 15px #000, 0 0 10px #ff6600;
            width: 100px;
            font-family: 'Digital-7 Mono', monospace;
            color: white;
        }

        .display.red { color: #ff3300; }
        .display.green { color: #00ff00; }
        .display.yellow { color: #ffff00; }

        .am-pm-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            margin-left: 10px;
        }

        .am-pm-label {
            font-size: 0.8em;
            color: white;
            background-color: #660000;
            padding: 2px 5px;
            border-radius: 3px;
        }

        .am-light, .pm-light {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #444;
            box-shadow: 0 0 5px #000;
        }

        .am-light.active { background-color: #00ff00; }
        .pm-light.active { background-color: #ff0000; }

        .time-label {
            font-size: 1.2em;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            margin-top: 10px;
            grid-column: span 9;
            text-align: center;
        }

        .colon {
            font-size: 3.5em; /* Make the colon larger */
            color: white;
            padding: 0 10px;
            display: flex;
            justify-content: center;
            align-items: flex-end; /* Align the colon vertically to the bottom */
            margin-top: 30px; /* Adjust the spacing below */
        }

        .keypad-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: url('https://www.transparenttextures.com/patterns/brushed-alum.png');
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #555;
            box-shadow: 0 0 20px #000;
            width: 220px;
        }

        .indicator-lights {
            display: flex;
            flex-direction: row;
            gap: 10px;
            margin-bottom: 20px;
        }

        .indicator-light {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #444;
            box-shadow: 0 0 5px #000;
        }

        .indicator-light.red { background-color: #ff0000; }
        .indicator-light.yellow { background-color: #ffff00; }
        .indicator-light.green { background-color: #00ff00; }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 60px);
            gap: 10px;
        }

        .key {
            width: 60px;
            height: 60px;
            background-color: #444;
            border: 2px solid #777;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            cursor: pointer;
            color: white;
            text-shadow: 0 0 5px #000;
            box-shadow: inset 0 0 8px #000, 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .key:active {
            background-color: #222;
            box-shadow: inset 0 0 10px #000;
        }

        .back-button {
            display: block;
            margin-top: 20px;
            background-color: #ff6600;
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 0 20px #ff6600, inset 0 0 8px #000;
            transition: 0.3s;
        }

        .back-button:hover {
            background-color: #ff3300;
            box-shadow: 0 0 30px #ff3300;
        }

        /* Fullscreen GIF overlay */
        .gif-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .gif-overlay img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>

<div class="main-container">
    <div class="countdown-container">
        <!-- Destination Time -->
        <div class="time-circuit" id="destination-time">
            <div>
                <div class="label">MONTH</div>
                <div class="display red" id="dest-month">11</div>
            </div>
            <div>
                <div class="label">DAY</div>
                <div class="display red" id="dest-day">05</div>
            </div>
            <div>
                <div class="label">YEAR</div>
                <div class="display red" id="dest-year">1955</div>
            </div>
            <div class="am-pm-container">
                <div class="am-pm-label">AM</div>
                <div class="am-light" id="dest-am-light" onclick="setAm('dest')"></div>
                <div class="am-pm-label">PM</div>
                <div class="pm-light" id="dest-pm-light" onclick="setPm('dest')"></div>
            </div>
            <div>
                <div class="label">HOUR</div>
                <div class="display red" id="dest-hour">01</div>
            </div>
            <div class="colon">:</div>
            <div>
                <div class="label">MIN</div>
                <div class="display red" id="dest-minute">22</div>
            </div>
            <div class="time-label">DESTINATION TIME</div>
        </div>

        <!-- Present Time -->
        <div class="time-circuit" id="present-time">
            <div>
                <div class="label">MONTH</div>
                <div class="display green" id="present-month">10</div>
            </div>
            <div>
                <div class="label">DAY</div>
                <div class="display green" id="present-day">26</div>
            </div>
            <div>
                <div class="label">YEAR</div>
                <div class="display green" id="present-year">1985</div>
            </div>
            <div class="am-pm-container">
                <div class="am-pm-label">AM</div>
                <div class="am-light" id="present-am-light"></div>
                <div class="am-pm-label">PM</div>
                <div class="pm-light" id="present-pm-light"></div>
            </div>
            <div>
                <div class="label">HOUR</div>
                <div class="display green" id="present-hour">01</div>
            </div>
            <div class="colon">:</div>
            <div>
                <div class="label">MIN</div>
                <div class="display green" id="present-minute">22</div>
            </div>
            <div class="time-label">PRESENT TIME</div>
        </div>

        <!-- Last Time Departed -->
        <div class="time-circuit" id="last-time">
            <div>
                <div class="label">MONTH</div>
                <div class="display yellow" id="last-month">10</div>
            </div>
            <div>
                <div class="label">DAY</div>
                <div class="display yellow" id="last-day">26</div>
            </div>
            <div>
                <div class="label">YEAR</div>
                <div class="display yellow" id="last-year">1985</div>
            </div>
            <div class="am-pm-container">
                <div class="am-pm-label">AM</div>
                <div class="am-light" id="last-am-light"></div>
                <div class="am-pm-label">PM</div>
                <div class="pm-light" id="last-pm-light"></div>
            </div>
            <div>
                <div class="label">HOUR</div>
                <div class="display yellow" id="last-hour">01</div>
            </div>
            <div class="colon">:</div>
            <div>
                <div class="label">MIN</div>
                <div class="display yellow" id="last-minute">20</div>
            </div>
            <div class="time-label">LAST TIME DEPARTED</div>
        </div>
    </div>

    <!-- Keypad -->
    <div class="keypad-container">
        <div class="indicator-lights">
            <div class="indicator-light red"></div>
            <div class="indicator-light yellow"></div>
            <div class="indicator-light green"></div>
        </div>
        <div class="keypad">
            <div class="key" onclick="insertNumber(1)">1</div>
            <div class="key" onclick="insertNumber(2)">2</div>
            <div class="key" onclick="insertNumber(3)">3</div>
            <div class="key" onclick="insertNumber(4)">4</div>
            <div class="key" onclick="insertNumber(5)">5</div>
            <div class="key" onclick="insertNumber(6)">6</div>
            <div class="key" onclick="insertNumber(7)">7</div>
            <div class="key" onclick="insertNumber(8)">8</div>
            <div class="key" onclick="insertNumber(9)">9</div>
            <div class="key" onclick="insertNumber(0)">0</div>
            <div class="key" onclick="backspace()">⌫</div>
            <div class="key" onclick="clearInput()">C</div>
        </div>
        <button class="back-button" onclick="triggerGifEffect()">Set Countdown</button>
    </div>
</div>

<!-- GIF Overlay for Transition -->
<div class="gif-overlay" id="gifOverlay">
    <img src="DeLorean Flames.gif" alt="Time Travel Transition" id="timeTravelGif">
</div>

<script>
    let inputValues = ['', '', '', '', '', 'AM'];
    let currentIndex = 0;

    function insertNumber(num) {
        if (currentIndex < inputValues.length - 1) {
            inputValues[currentIndex] += num;
            updateDisplay();
            
            if (checkFieldComplete(currentIndex)) {
                currentIndex++;
            }
        }
    }

    function checkFieldComplete(index) {
        const lengths = [2, 2, 4, 2, 2];
        return inputValues[index].length === lengths[index];
    }

    function backspace() {
        if (currentIndex >= 0) {
            if (inputValues[currentIndex].length === 0 && currentIndex > 0) {
                currentIndex--;
            }
            inputValues[currentIndex] = inputValues[currentIndex].slice(0, -1);
            updateDisplay();
        }
    }

    function clearInput() {
        inputValues = ['', '', '', '', '', 'AM'];
        currentIndex = 0;
        updateDisplay();
    }

    function updateDisplay() {
        const [month, day, year, hour, minute, amPm] = inputValues;
        document.getElementById("dest-year").textContent = year || "1955";
        document.getElementById("dest-month").textContent = month || "11";
        document.getElementById("dest-day").textContent = day || "05";
        document.getElementById("dest-hour").textContent = hour || "01";
        document.getElementById("dest-minute").textContent = minute || "22";
        updateAmPmLight('dest', amPm);
    }

    function updateAmPmLight(clock, amPm) {
        document.getElementById(`${clock}-am-light`).classList.toggle("active", amPm === "AM");
        document.getElementById(`${clock}-pm-light`).classList.toggle("active", amPm === "PM");
    }

    function setAm(clock) {
        inputValues[5] = "AM";
        updateAmPmLight(clock, "AM");
    }

    function setPm(clock) {
        inputValues[5] = "PM";
        updateAmPmLight(clock, "PM");
    }

    function triggerGifEffect() {
        const gifOverlay = document.getElementById("gifOverlay");
        const timeTravelGif = document.getElementById("timeTravelGif");
        
        // Reset the GIF source to restart the animation
        timeTravelGif.src = timeTravelGif.src;
        
        // Show the GIF overlay
        gifOverlay.style.display = "flex";
        
        setTimeout(() => {
            gifOverlay.style.display = "none";
            storeLastTimeDeparted();
            redirectToEventDetails();
        }, 5000); // Adjust based on GIF length
    }

    function storeLastTimeDeparted() {
        const [month, day, year, hour, minute, amPm] = inputValues;
        document.getElementById("last-year").textContent = year || "1955";
        document.getElementById("last-month").textContent = month || "11";
        document.getElementById("last-day").textContent = day || "05";
        document.getElementById("last-hour").textContent = hour || "01";
        document.getElementById("last-minute").textContent = minute || "22";
        updateAmPmLight('last', amPm);
    }

    function redirectToEventDetails() {
        const [month, day, year, hour, minute, amPm] = inputValues;

        const destYear = year || "1955";
        const destMonth = month || "11";
        const destDay = day || "05";
        const destHour = hour || "01";
        const destMinute = minute || "22";
        const destAmPm = amPm || "AM";

        const params = new URLSearchParams({
            year: destYear,
            month: destMonth,
            day: destDay,
            hour: destHour,
            minute: destMinute,
            amPm: destAmPm
        });

        window.location.href = `event-details.html?${params.toString()}`;
    }

    setInterval(() => {
        const now = new Date();
        document.getElementById("present-year").textContent = now.getFullYear();
        document.getElementById("present-month").textContent = String(now.getMonth() + 1).padStart(2, '0');
        document.getElementById("present-day").textContent = String(now.getDate()).padStart(2, '0');
        document.getElementById("present-hour").textContent = String(now.getHours() % 12 || 12).padStart(2, '0');
        document.getElementById("present-minute").textContent = String(now.getMinutes()).padStart(2, '0');
        updateAmPmLight('present', now.getHours() < 12 ? 'AM' : 'PM');
    }, 1000);
</script>

</body>
</html>